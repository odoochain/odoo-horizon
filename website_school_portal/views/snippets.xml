<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Template générique du snippet -->
    <template id="hz_generic_insert_snippet" name="Snippet générique Horizon">
        <section class="hz_generic_insert_snippet o_not_editable" data-template-name="hz_horizon_access">
            <div class="container">
                <div class="dynamic_snippet_template"/>
            </div>
        </section>
    </template>

    <!-- Template snippet loader -->
    <template id="hz_snippet_loader">
        <div class="d-flex justify-content-center o_not_editable" t-ignore="true">
            <span class="mx-5 my-5">Chargement en cours...</span>
        </div>
    </template>

    <!-- Template snippet connexion -->
    <template id="hz_horizon_access">
        <t t-set="translatable" t-value="true" />
        <div class="row justify-content-center o_not_editable" t-ignore="true">
            <t t-if="request.env.user == request.website.user_id">
                <div class="col-lg-3 o_colored_level">
                    <p class="text-center">
                        <span class="d-block fw-bold fst-italic mb-3">
                            Déjà inscrit ?
                        </span>
                        <a href="/my/home" class="btn btn-primary rounded-circle o_we_force_no_transition">Se connecter</a>
                    </p>
                </div>
                <div class="col-lg-3 o_colored_level">
                    <p class="text-center">
                        <span class="d-block fw-bold fst-italic mb-3">
                            Pas encore de compte ?
                        </span>
                        <a href="/web/signup" class="btn btn-fill-secondary rounded-circle">
                            S'inscrir​​​​​​e​
                        </a>
                    </p>
                </div>
            </t>
            <t t-elif="website.env.user.partner_id.teacher == True">
                <div class="o_colored_level col-lg-12">
                    <p class="text-center">
                        <a href="/my/home" class="btn btn-primary rounded-circle">Voir mon profil enseignant</a>
                    </p>
                </div>
            </t>
            <t t-else="">
                <div class="o_colored_level col-lg-12">
                    <p class="text-center">
                        <a href="/my/home" class="btn btn-primary rounded-circle">Voir mon compte</a>
                    </p>
                </div>
            </t>
        </div>
    </template>

    <!-- Ajout du snippet aux blocks de l'éditeur -->
    <template id="hz_snippets_horizon" inherit_id="website.snippets" name="Snippets Horizon">
        <xpath expr="//div[@id='snippet_structure']" position="before">
            <div id="hz_snippets_horizon_custom_horizon" class="o_panel">
                <div class="o_panel_header">Horizon</div>
                <div class="o_panel_body">
                    <t t-snippet="website_school_portal.hz_generic_insert_snippet" t-thumbnail=""/>
                </div>
            </div>
        </xpath>
    </template>

    <!-- Options permettant de sélectionner le template à afficher dans le snippet générique -->
    <template id="s_generic_insert_options" inherit_id="website.snippet_options" name="Snippet options">
        <xpath expr="//div[@data-js='Box']" position="after">
            <div data-js="s_generic_insert_options" data-selector=".hz_generic_insert_snippet" data-no-preview="true">
                <we-select string="Snippet" data-attribute-name="templateName" data-no-preview="true">
                    <we-button data-select-data-attribute="hz_horizon_access">Horizon Access</we-button>
                </we-select>
            </div>
        </xpath>
    </template>

</odoo>